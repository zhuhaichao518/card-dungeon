# 🎮 Card Dungeon — 游戏设计文档

> **类型**：roguelike 卡牌 + 魔塔探索  
> **平台**：浏览器 (HTML5/Canvas)  
> **灵感**：Dream Quest × 魔塔 × 炉石传说

---

## 一、游戏概述

玩家操控一名地下城探险者，在魔塔风格的地图中探索、收集道具、触发卡牌战斗，  
最终击败所有怪物并找到通往下一层的楼梯。

**核心差异点**：战斗不是传统魔塔的数值碾压，而是类炉石传说的回合制卡牌对战（纯1v1，无随从）。

---

## 二、核心玩法循环

```
探索地图
  → 拾取钥匙/血瓶
  → 用钥匙开门，拓展可达区域
  → 走到怪物旁触发卡牌战斗
    → 出牌消耗能量
    → 怪物回合攻击
    → 战斗结束获得新卡
  → 到达楼梯进入下一层
```

---

## 三、地图系统

### 瓷砖类型

| ID | 名称 | 说明 |
|----|------|------|
| 0  | 地板 | 可自由行走 |
| 1  | 墙壁 | 不可穿越 |
| 2  | 黄门 | 消耗1把黄钥匙开启 |
| 3  | 蓝门 | 消耗1把蓝钥匙开启 |
| 4  | 红门 | 消耗1把红钥匙开启 |
| 5  | 黄钥匙 | 拾取 +1 黄钥匙 |
| 6  | 蓝钥匙 | 拾取 +1 蓝钥匙 |
| 7  | 红钥匙 | 拾取 +1 红钥匙 |
| 10 | 楼梯 | 进入下一层 |
| 12 | 血瓶 | 拾取恢复 30 HP |
| 15 | 刺陷阱 | 踩到扣 10 HP（不消失） |

### 操作

- **键盘**：WASD / 方向键
- **鼠标/触屏**：点击相邻格子
- 走到怪物所在格子自动进入战斗

### 素材来源

所有像素图素材均来自 [mota-js](https://github.com/ckcz123/mota-js) 开源项目。

---

## 四、卡牌战斗系统（行动值水晶制）

### 基本规则

- 每回合：护盾清零 → 抽5张手牌 → 获得3点能量
- 打出卡牌消耗对应能量，效果立即生效
- 点击"结束回合"后怪物执行行动
- HP归零判负/胜利

### 护盾机制

- 护盾优先吸收伤害（超过护盾值的伤害才扣HP）
- 每回合开始时护盾**清零**（不叠加）

### 初始牌组（10张）

| 卡牌 | 费用 | 效果 | 数量 |
|------|------|------|------|
| 打击 | 1 | 造成 6 点伤害 | 3 |
| 防御 | 1 | 获得 5 点护盾 | 3 |
| 速击 | 1 | 造成 4 伤害 × 2 | 1 |
| 重击 | 2 | 造成 12 点伤害 | 1 |
| 招架 | 2 | 获得 8 点护盾 | 1 |
| 包扎 | 2 | 恢复 8 点生命 | 1 |

### 奖励卡池（战胜怪物后随机获得1张）

重击 / 招架 / 包扎 / 速击

---

## 五、怪物设计

### 当前怪物（第一层）

#### 绿史莱姆

- **HP**：25
- **行动模式**（循环）：
  1. 攻击 8 伤害
  2. 攻击 8 伤害
  3. 强化攻击 12 伤害（上回合显示"正在积蓄力量！"预警）

---

## 六、存档系统

- 使用浏览器 `localStorage`，共 3 个槽位
- 游戏中按 `Esc` 或 ⏸ 按钮打开暂停菜单存档
- 存档内容：玩家位置/HP、背包、地图状态、剩余怪物、完整牌组

---

## 七、未来规划

### 近期（v0.2）
- [ ] 第二、三层地图
- [ ] 更多怪物（骷髅战士、蝙蝠等）
- [ ] 状态效果：中毒、灼烧、虚弱
- [ ] 商店格：花费金币购买卡牌

### 中期（v0.3）
- [ ] 卡牌稀有度系统（普通/罕见/史诗）
- [ ] Boss战（特殊行动模式）
- [ ] 背景音乐和音效
- [ ] 技能系统（被动天赋树）

### 远期（v1.0）
- [ ] 10+ 层地下城
- [ ] 随机地图生成
- [ ] 多职业（战士/法师/盗贼）
- [ ] 排行榜

---

*最后更新：2026-02*
